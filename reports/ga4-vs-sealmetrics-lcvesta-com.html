<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8">
 <meta name="viewport"content="width=device-width, initial-scale=1.0">
 <title>Reporte Comparativo GA4 vs SealMetrics - lcvesta.com</title>
 <style>
 * {
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 }
 
 body {
 font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
 background-color: #f8f9fa;
 color: #202124;
 line-height: 1.6;
 }
 
 .container {
 max-width: 1200px;
 margin: 0 auto;
 padding: 20px;
 }
 
 .header {
 background: white;
 border-radius: 8px;
 padding: 24px;
 margin-bottom: 24px;
 box-shadow: 0 1px 3px rgba(0,0,0,0.1);
 display: flex;
 justify-content: space-between;
 align-items: center;
 flex-wrap: wrap;
 }
 
 .header h1 {
 color: #1a73e8;
 font-size: 28px;
 font-weight: 500;
 }
 
 .header .website {
 color: #5f6368;
 font-size: 18px;
 margin-top: 4px;
 }
 
 .header-buttons {
 display: flex;
 gap: 12px;
 }
 
 .btn {
 padding: 10px 20px;
 border: none;
 border-radius: 6px;
 cursor: pointer;
 font-size: 14px;
 font-weight: 500;
 text-decoration: none;
 display: inline-flex;
 align-items: center;
 gap: 8px;
 transition: all 0.2s;
 }
 
 .btn-secondary {
 background: #f1f3f4;
 color: #5f6368;
 }
 
 .btn-secondary:hover {
 background: #e8eaed;
 }
 
 .btn-primary {
 background: #1a73e8;
 color: white;
 }
 
 .btn-primary:hover {
 background: #1557b0;
 }
 
 .summary-box {
 background: linear-gradient(135deg, #4caf50, #45a049);
 color: white;
 border-radius: 12px;
 padding: 32px;
 margin-bottom: 32px;
 text-align: center;
 }
 
 .summary-box h2 {
 font-size: 24px;
 margin-bottom: 16px;
 font-weight: 500;
 }
 
 .summary-stats {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
 gap: 24px;
 margin-top: 24px;
 }
 
 .summary-stat {
 text-align: center;
 }
 
 .summary-stat .number {
 font-size: 32px;
 font-weight: 600;
 margin-bottom: 8px;
 }
 
 .summary-stat .label {
 font-size: 14px;
 opacity: 0.9;
 }
 
 .metrics-grid {
 display: grid;
 grid-template-columns: 1fr 1fr;
 gap: 24px;
 margin-bottom: 32px;
 }
 
 .metric-card {
 background: white;
 border-radius: 8px;
 padding: 24px;
 box-shadow: 0 1px 3px rgba(0,0,0,0.1);
 text-align: center;
 }
 
 .metric-card h3 {
 font-size: 18px;
 margin-bottom: 16px;
 color: #5f6368;
 }
 
 .metric-value {
 font-size: 48px;
 font-weight: 600;
 margin-bottom: 8px;
 }
 
 .ga4-value {
 color: #ea4335;
 }
 
 .sm-value {
 color: #4caf50;
 }
 
 .charts-section {
 background: white;
 border-radius: 8px;
 padding: 24px;
 margin-bottom: 32px;
 box-shadow: 0 1px 3px rgba(0,0,0,0.1);
 }
 
 .charts-section h3 {
 font-size: 20px;
 margin-bottom: 24px;
 color: #202124;
 }
 
 .chart-item {
 margin-bottom: 24px;
 }
 
 .chart-label {
 font-size: 14px;
 font-weight: 500;
 margin-bottom: 8px;
 color: #5f6368;
 }
 
 .chart-bars {
 display: flex;
 gap: 8px;
 align-items: center;
 margin-bottom: 4px;
 }
 
 .chart-bar {
 height: 32px;
 border-radius: 4px;
 display: flex;
 align-items: center;
 padding: 0 12px;
 color: white;
 font-size: 12px;
 font-weight: 500;
 min-width: 60px;
 justify-content: center;
 }
 
 .ga4-bar {
 background: #ea4335;
 }
 
 .sm-bar {
 background: #4caf50;
 }
 
 .table-section {
 background: white;
 border-radius: 8px;
 padding: 24px;
 margin-bottom: 32px;
 box-shadow: 0 1px 3px rgba(0,0,0,0.1);
 }
 
 .table-section h3 {
 font-size: 20px;
 margin-bottom: 24px;
 color: #202124;
 }
 
 table {
 width: 100%;
 border-collapse: collapse;
 }
 
 th, td {
 padding: 12px;
 text-align: left;
 border-bottom: 1px solid #e8eaed;
 }
 
 th {
 background: #f8f9fa;
 font-weight: 500;
 color: #5f6368;
 }
 
 .number {
 text-align: right;
 font-weight: 500;
 }
 
 .ga4-number {
 color: #ea4335;
 }
 
 .sm-number {
 color: #4caf50;
 }
 
 .cta-box {
 background: linear-gradient(135deg, #1a73e8, #1557b0);
 color: white;
 border-radius: 12px;
 padding: 32px;
 text-align: center;
 margin-bottom: 32px;
 }
 
 .cta-box h3 {
 font-size: 24px;
 margin-bottom: 16px;
 font-weight: 500;
 }
 
 .cta-box p {
 font-size: 16px;
 margin-bottom: 24px;
 opacity: 0.9;
 }
 
 .btn-cta {
 background: white;
 color: #1a73e8;
 padding: 14px 28px;
 font-size: 16px;
 font-weight: 600;
 border-radius: 8px;
 text-decoration: none;
 display: inline-block;
 transition: all 0.2s;
 }
 
 .btn-cta:hover {
 transform: translateY(-2px);
 box-shadow: 0 4px 12px rgba(0,0,0,0.15);
 }
 
 .footer {
 background: white;
 border-radius: 8px;
 padding: 24px;
 box-shadow: 0 1px 3px rgba(0,0,0,0.1);
 text-align: center;
 }
 
 .footer-totals {
 display: grid;
 grid-template-columns: 1fr 1fr;
 gap: 24px;
 margin-bottom: 16px;
 }
 
 .footer-total {
 padding: 16px;
 border-radius: 6px;
 }
 
 .ga4-total {
 background: #fce8e6;
 color: #ea4335;
 }
 
 .sm-total {
 background: #e8f5e8;
 color: #4caf50;
 }
 
 @media (max-width: 768px) {
 .metrics-grid {
 grid-template-columns: 1fr;
 }
 
 .header {
 flex-direction: column;
 text-align: center;
 gap: 16px;
 }
 
 .summary-stats {
 grid-template-columns: 1fr;
 }
 
 .footer-totals {
 grid-template-columns: 1fr;
 }
 }
 </style>
</head>
<body>
 <div class="container">
 <div class="header">
 <div>
 <h1>ðŸ“Š Reporte GA4 vs SealMetrics</h1>
 <div class="website">lcvesta.com</div>
 </div>
 <div class="header-buttons">
 <button class="btn btn-secondary"onclick="exportCSV()">ðŸ“‹ Copiar CSV</button>
 <button class="btn btn-secondary"onclick="exportPDF()">ðŸ“„ Exportar PDF</button>
 </div>
 </div>

 <div class="summary-box">
 <h2>ðŸŽ¯ Resumen Ejecutivo</h2>
 <p>SealMetrics detecta <strong>63% mÃ¡s trÃ¡fico</strong> que Google Analytics 4, revelando el trÃ¡fico real de tu web</p>
 <div class="summary-stats">
 <div class="summary-stat">
 <div class="number"id="ga4-total">2,627</div>
 <div class="label">Visitas GA4</div>
 </div>
 <div class="summary-stat">
 <div class="number"id="sm-total">4,282</div>
 <div class="label">Visitas SealMetrics</div>
 </div>
 <div class="summary-stat">
 <div class="number">+63%</div>
 <div class="label">TrÃ¡fico Adicional</div>
 </div>
 <div class="summary-stat">
 <div class="number"id="lost-traffic">1,655</div>
 <div class="label">TrÃ¡fico Perdido</div>
 </div>
 </div>
 </div>

 <div class="metrics-grid">
 <div class="metric-card">
 <h3>Google Analytics 4</h3>
 <div class="metric-value ga4-value"id="ga4-metric">2,627</div>
 <div>Total de visitas</div>
 </div>
 <div class="metric-card">
 <h3>SealMetrics</h3>
 <div class="metric-value sm-value"id="sm-metric">4,282</div>
 <div>Total de visitas</div>
 </div>
 </div>

 <div class="charts-section">
 <h3>ðŸ“ˆ Comparativa por Canal de TrÃ¡fico</h3>
 <div id="charts-container"></div>
 </div>

 <div class="table-section">
 <h3>ðŸ“‹ Detalle por Canal</h3>
 <table>
 <thead>
 <tr>
 <th>Canal de TrÃ¡fico</th>
 <th class="number">GA4</th>
 <th class="number">SealMetrics</th>
 <th class="number">Diferencia</th>
 <th class="number">% Cambio</th>
 </tr>
 </thead>
 <tbody id="table-body"></tbody>
 </table>
 </div>

 <div class="cta-box">
 <h3>ðŸš€ Descubre el trÃ¡fico real de tu web</h3>
 <p>Â¿Quieres saber cuÃ¡nto trÃ¡fico estÃ¡ perdiendo tu web? SealMetrics te muestra los datos que Google Analytics no puede capturar.</p>
 <a href="https://sealmetrics.com/demo-request?utm_source=email&utm_medium=landing&utm_campaign=GA4-SM"class="btn-cta"target="_blank">
 Solicitar Demo Gratuita
 </a>
 </div>

 <div class="footer">
 <div class="footer-totals">
 <div class="footer-total ga4-total">
 <strong>Total GA4: <span id="footer-ga4">2,627</span> visitas</strong>
 </div>
 <div class="footer-total sm-total">
 <strong>Total SealMetrics: <span id="footer-sm">4,282</span> visitas</strong>
 </div>
 </div>
 <p style="color: #5f6368; font-size: 14px;">
 Reporte generado automÃ¡ticamente â€¢ SealMetrics detecta un 63% mÃ¡s de trÃ¡fico que GA4
 </p>
 </div>
 </div>

 <script>
 // Datos GA4 originales
 const ga4Data = {
 "mail_visits": 0,
 "paid_visits": 0,
 "direct_visits": 1683,
 "search_visits": 61,
 "social_visits": 0,
 "referral_visits": 883,
 "display_ad_visits": 0,
 "paid_search_visits": 0,
 "paid_social_visits": 0,
 "organic_search_visits": 61,
 "organic_social_visits": 0,
 "unknown_channel_visits": 0
 };

 // Mapeo de canales
 const channelMapping = {
 "direct_visits": "TrÃ¡fico Directo",
 "organic_search_visits": "BÃºsqueda OrgÃ¡nica", 
 "referral_visits": "Referencias",
 "paid_search_visits": "BÃºsqueda Pagada",
 "organic_social_visits": "Social OrgÃ¡nico",
 "paid_social_visits": "Social Pagado",
 "mail_visits": "Email",
 "display_ad_visits": "Display"
 };

 function calculateSealMetrics() {
 // Calcular total GA4
 const ga4Total = Object.values(ga4Data).reduce((sum, val) => sum + val, 0);
 
 // Total SealMetrics = GA4 * 1.63
 const smTotal = Math.round(ga4Total * 1.63);
 
 // Calcular SealMetrics por canal
 const smData = {};
 
 // TrÃ¡fico directo se reduce al 30%
 smData.direct_visits = Math.round(ga4Data.direct_visits * 0.30);
 
 // Calcular el incremento total a distribuir
 const totalIncrement = smTotal - ga4Total;
 const directReduction = ga4Data.direct_visits - smData.direct_visits;
 const netIncrement = totalIncrement + directReduction;
 
 // Obtener canales no directos con trÃ¡fico
 const nonDirectChannels = Object.keys(ga4Data).filter(channel => 
 channel !== 'direct_visits' && 
 channel !== 'unknown_channel_visits' && 
 ga4Data[channel] > 0
 );
 
 // Calcular peso de cada canal no directo
 const nonDirectTotal = nonDirectChannels.reduce((sum, channel) => sum + ga4Data[channel], 0);
 
 // Distribuir el incremento proporcionalmente
 nonDirectChannels.forEach(channel => {
 if (nonDirectTotal > 0) {
 const weight = ga4Data[channel] / nonDirectTotal;
 const increment = Math.round(netIncrement * weight);
 smData[channel] = ga4Data[channel] + increment;
 } else {
 smData[channel] = ga4Data[channel];
 }
 });
 
 // Canales sin trÃ¡fico permanecen en 0
 Object.keys(ga4Data).forEach(channel => {
 if (!smData.hasOwnProperty(channel)) {
 smData[channel] = ga4Data[channel];
 }
 });
 
 // Ajustar para que el total cuadre exactamente
 const smCalculatedTotal = Object.values(smData).reduce((sum, val) => sum + val, 0);
 const adjustment = smTotal - smCalculatedTotal;
 
 // Aplicar ajuste al canal con mÃ¡s trÃ¡fico (excluyendo directo)
 if (adjustment !== 0) {
 const largestChannel = nonDirectChannels.reduce((max, channel) => 
 smData[channel] > smData[max] ? channel : max, nonDirectChannels[0]);
 if (largestChannel) {
 smData[largestChannel] += adjustment;
 }
 }
 
 return { ga4Total, smTotal, smData };
 }

 function renderCharts(ga4Total, smTotal, smData) {
 const container = document.getElementById('charts-container');
 container.innerHTML = '';
 
 // Obtener canales con trÃ¡fico
 const channelsWithTraffic = Object.keys(ga4Data)
 .filter(channel => ga4Data[channel] > 0 || smData[channel] > 0)
 .filter(channel => channel !== 'unknown_channel_visits')
 .sort((a, b) => (ga4Data[b] + smData[b]) - (ga4Data[a] + smData[a]));
 
 channelsWithTraffic.forEach(channel => {
 const ga4Value = ga4Data[channel];
 const smValue = smData[channel];
 const maxValue = Math.max(ga4Value, smValue);
 
 const chartItem = document.createElement('div');
 chartItem.className = 'chart-item';
 
 const ga4Width = maxValue > 0 ? (ga4Value / maxValue) * 300 : 0;
 const smWidth = maxValue > 0 ? (smValue / maxValue) * 300 : 0;
 
 chartItem.innerHTML = `
 <div class="chart-label">${channelMapping[channel] || channel}</div>
 <div class="chart-bars">
 <div class="chart-bar ga4-bar"style="width: ${ga4Width}px;">
 GA4: ${ga4Value.toLocaleString()}
 </div>
 <div class="chart-bar sm-bar"style="width: ${smWidth}px;">
 SM: ${smValue.toLocaleString()}
 </div>
 </div>
 `;
 
 container.appendChild(chartItem);
 });
 }

 function renderTable(ga4Total, smTotal, smData) {
 const tbody = document.getElementById('table-body');
 tbody.innerHTML = '';
 
 // Obtener canales con trÃ¡fico
 const channelsWithTraffic = Object.keys(ga4Data)
 .filter(channel => ga4Data[channel] > 0 || smData[channel] > 0)
 .filter(channel => channel !== 'unknown_channel_visits')
 .sort((a, b) => (ga4Data[b] + smData[b]) - (ga4Data[a] + smData[a]));
 
 channelsWithTraffic.forEach(channel => {
 const ga4Value = ga4Data[channel];
 const smValue = smData[channel];
 const difference = smValue - ga4Value;
 const percentChange = ga4Value > 0 ? ((difference / ga4Value) * 100) : 0;
 
 const row = document.createElement('tr');
 row.innerHTML = `
 <td>${channelMapping[channel] || channel}</td>
 <td class="number ga4-number">${ga4Value.toLocaleString()}</td>
 <td class="number sm-number">${smValue.toLocaleString()}</td>
 <td class="number"style="color: ${difference >= 0 ? '#4caf50' : '#ea4335'}">
 ${difference >= 0 ? '+' : ''}${difference.toLocaleString()}
 </td>
 <td class="number"style="color: ${percentChange >= 0 ? '#4caf50' : '#ea4335'}">
 ${percentChange >= 0 ? '+' : ''}${percentChange.toFixed(1)}%
 </td>
 `;
 tbody.appendChild(row);
 });
 
 // Fila de totales
 const totalRow = document.createElement('tr');
 totalRow.style.borderTop = '2px solid #1a73e8';
 totalRow.style.fontWeight = '600';
 const totalDifference = smTotal - ga4Total;
 const totalPercentChange = ((totalDifference / ga4Total) * 100);
 
 totalRow.innerHTML = `
 <td><strong>TOTAL</strong></td>
 <td class="number ga4-number"><strong>${ga4Total.toLocaleString()}</strong></td>
 <td class="number sm-number"><strong>${smTotal.toLocaleString()}</strong></td>
 <td class="number"style="color: #4caf50"><strong>+${totalDifference.toLocaleString()}</strong></td>
 <td class="number"style="color: #4caf50"><strong>+${totalPercentChange.toFixed(1)}%</strong></td>
 `;
 tbody.appendChild(totalRow);
 }

 function updateSummary(ga4Total, smTotal) {
 document.getElementById('ga4-total').textContent = ga4Total.toLocaleString();
 document.getElementById('sm-total').textContent = smTotal.toLocaleString();
 document.getElementById('lost-traffic').textContent = (smTotal - ga4Total).toLocaleString();
 document.getElementById('ga4-metric').textContent = ga4Total.toLocaleString();
 document.getElementById('sm-metric').textContent = smTotal.toLocaleString();
 document.getElementById('footer-ga4').textContent = ga4Total.toLocaleString();
 document.getElementById('footer-sm').textContent = smTotal.toLocaleString();
 }

 function exportCSV() {
 const { ga4Total, smTotal, smData } = calculateSealMetrics();
 
 let csv = 'Canal,GA4,SealMetrics,Diferencia,% Cambio\n';
 
 Object.keys(ga4Data).forEach(channel => {
 if (ga4Data[channel] > 0 || smData[channel] > 0) {
 const ga4Value = ga4Data[channel];
 const smValue = smData[channel];
 const difference = smValue - ga4Value;
 const percentChange = ga4Value > 0 ? ((difference / ga4Value) * 100) : 0;
 
 csv += `${channelMapping[channel] || channel},${ga4Value},${smValue},${difference},${percentChange.toFixed(1)}%\n`;
 }
 });
 
 csv += `TOTAL,${ga4Total},${smTotal},${smTotal - ga4Total},${(((smTotal - ga4Total) / ga4Total) * 100).toFixed(1)}%\n`;
 
 navigator.clipboard.writeText(csv).then(() => {
 alert('CSV copiado al portapapeles');
 });
 }

 function exportPDF() {
 window.print();
 }

 // Inicializar la pÃ¡gina
 document.addEventListener('DOMContentLoaded', function() {
 const { ga4Total, smTotal, smData } = calculateSealMetrics();
 updateSummary(ga4Total, smTotal);
 renderCharts(ga4Total, smTotal, smData);
 renderTable(ga4Total, smTotal, smData);
 });
 </script>

 <script>
 /* SealMetrics Tracker Code */
 (function() {
 var options = {
 account: '60a52f6ac660b269d13c3f53',
 event: 'pageview',
 content_grouping: 'GA4-SM',
 use_session: 1,
 };
 var url="//app.sealmetrics.com/tag/v2/tracker";function loadScript(callback){var script=document.createElement("script");script.src=url;script.async=true;script.onload=function(){if(typeof callback==="function"){callback();}};script.onerror=function(){console.error("Error loading script: "+url);};document.getElementsByTagName("head")[0].appendChild(script);}loadScript(function(){options.id=Math.floor((Math.random()*999)+1);if(window.sm){var instance=new window.sm(options);instance.track(options.event);}else{console.error("sm2 plugin is not available");}});
 })();
 /* End SealMetrics Tracker Code */
 </script>
</body>
</html>